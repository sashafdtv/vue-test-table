webpackJsonp([1],{HeBx:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("7+uW"),r=a("mvHQ"),l=a.n(r),i={name:"Table",props:{tableData:{type:Array,default:function(){return[]}}}},o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("section",[t("el-table",{staticStyle:{width:"100%"},attrs:{data:this.tableData,"row-key":"id"}},[t("el-table-column",{attrs:{prop:"name",label:"Имя",width:"200",sortable:""}}),this._v(" "),t("el-table-column",{attrs:{prop:"phone",label:"Телефон",width:"300"}})],1)],1)},staticRenderFns:[]};var s=a("VU/8")(i,o,!1,function(e){a("UzCW")},"data-v-e7992106",null).exports,u=a("Xxa5"),c=a.n(u),d=a("exGp"),p=a.n(d),m={name:"Modal",props:{value:{type:Boolean,default:!1},headsList:{type:Array,default:function(){return[]}}},data:function(){return{form:{name:"",phone:"",head:""},rules:{name:[{required:!0,message:"Пожалуйста, введите имя",trigger:"blur"}],phone:[{required:!0,message:"Пожалуйста, введите телефон",trigger:"blur"},{min:10,max:10,message:"Номер телефона должен содержать 11 цифр",trigger:"blur"}]}}},methods:{onSubmit:function(){var e,t=this;this.$refs.form.validate((e=p()(c.a.mark(function e(a){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=6;break}t.$emit("submit",{name:t.form.name,phone:t.transformNumber(t.form.phone),head:t.form.head,children:[]}),t.$attrs.close(),t.$refs.form.resetFields(),e.next=7;break;case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}},e,t)})),function(t){return e.apply(this,arguments)}))},transformNumber:function(e){return"+7 "+e.slice(0,3)+" "+e.slice(3,6)+" "+e.slice(6,8)+" "+e.slice(8,10)}}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"Имя",prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Телефон",prop:"phone"}},[a("el-input",{attrs:{type:"number"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}},[a("template",{slot:"prepend"},[e._v("+7")])],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"Начальник",prop:"head"}},[a("el-select",{attrs:{placeholder:"Выберите руководителя"},model:{value:e.form.head,callback:function(t){e.$set(e.form,"head",t)},expression:"form.head"}},e._l(e.headsList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("div",{staticClass:"button-wrapper"},[a("el-button",{attrs:{type:"success"},on:{click:e.onSubmit}},[e._v("\n      Сохранить\n    ")])],1)],1)},staticRenderFns:[]};var h={name:"App",components:{Table:s,Form:a("VU/8")(m,f,!1,function(e){a("YLp6")},"data-v-66e6455a",null).exports},data:function(){return{visibleModal:!1}},computed:{tableData:function(){return this.loadData("tableData")||[{id:"1",name:"Марина",phone:"+7 941 123 21 42",children:[]},{id:"2",name:"Петр",phone:"+7 941 123 21 42",children:[]},{id:"3",name:"Алексей",phone:"+7 941 123 21 42",children:[]},{id:"4",name:"Борис",phone:"+7 941 123 21 42",children:[]}]}},methods:{changeModalVisibility:function(){this.visibleModal=!this.visibleModal},addUser:function(e){if(e.head){var t=this.tableData.find(function(t){return t.id===e.head});e.id=t.id+"-"+(+t.children.length+1),t.children.push(e)}else e.id=this.tableData.length+1,this.tableData.push(e);this.saveData("tableData",this.tableData)},closeHandler:function(){this.changeModalVisibility()},submitHandler:function(e){this.addUser(e)},loadData:function(e){try{return JSON.parse(localStorage.getItem(e))}catch(e){return!1}},saveData:function(e,t){return localStorage.setItem(e,l()(t))}}},b={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("Table",{attrs:{tableData:e.tableData}}),e._v(" "),a("div",{staticClass:"button-wrapper"},[a("el-button",{attrs:{type:"primary"},on:{click:e.changeModalVisibility}},[e._v("Добавить")])],1),e._v(" "),a("el-dialog",{attrs:{visible:e.visibleModal,title:"Добавление пользователя"},on:{"update:visible":function(t){e.visibleModal=t}}},[a("Form",{attrs:{headsList:e.tableData,close:e.closeHandler},on:{submit:e.submitHandler}})],1)],1)},staticRenderFns:[]};var v=a("VU/8")(h,b,!1,function(e){a("HeBx")},null,null).exports,g=a("zL8q"),y=a.n(g);a("tvR6");n.default.config.productionTip=!1,n.default.use(y.a),new n.default({el:"#app",components:{App:v},template:"<App/>"})},UzCW:function(e,t){},YLp6:function(e,t){},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.c59b88b6e9ef5f280bea.js.map